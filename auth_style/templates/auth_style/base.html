{% load allauth %}
{% load i18n %}
{% load static %}
<!DOCTYPE html>
<html class="bg-base-200">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
      {% block head_title %}{% endblock head_title %}
    </title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="{% static 'auth_style/dist/styles.css' %}">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    {% include "auth_style/extra_head.html" %}
  </head>
  <body>
    {% block body %}
      <div class="flex flex-col sm:flex-row sm:navbar">
        <span class="text-center sm:text-left sm:grow">
          {% include "auth_style/site_name.html" %}
        </span>
        {# TODO: display username and user info #}
        {% if user.is_authenticated %}
          {% url 'account_email' as email_url_ %}
          {% if email_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ email_url_ }}">
              <!-- Heroicons: micro envelope -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path d="M2.5 3A1.5 1.5 0 0 0 1 4.5v.793c.026.009.051.02.076.032L7.674 8.51c.206.1.446.1.652 0l6.598-3.185A.755.755 0 0 1 15 5.293V4.5A1.5 1.5 0 0 0 13.5 3h-11Z" />
                <path d="M15 6.954 8.978 9.86a2.25 2.25 0 0 1-1.956 0L1 6.954V11.5A1.5 1.5 0 0 0 2.5 13h11a1.5 1.5 0 0 0 1.5-1.5V6.954Z" />
              </svg>
              <span>{% trans "Change Email" %}</span>
            </a>
          {% endif %}
          {% url 'account_change_password' as change_password_url_ %}
          {% if change_password_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ change_password_url_ }}">
              <!-- Heroicons: micro key -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M14 6a4 4 0 0 1-4.899 3.899l-1.955 1.955a.5.5 0 0 1-.353.146H5v1.5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1-.5-.5v-2.293a.5.5 0 0 1 .146-.353l3.955-3.955A4 4 0 1 1 14 6Zm-4-2a.75.75 0 0 0 0 1.5.5.5 0 0 1 .5.5.75.75 0 0 0 1.5 0 2 2 0 0 0-2-2Z" clip-rule="evenodd" />
              </svg>
              {% trans "Change Password" %}
            </a>
          {% endif %}
          {% url 'mfa_index' as mfa_url_ %}
          {% if mfa_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ mfa_url_ }}">
              <!-- Heroicons: micro lock -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M8 1a3.5 3.5 0 0 0-3.5 3.5V7A1.5 1.5 0 0 0 3 8.5v5A1.5 1.5 0 0 0 4.5 15h7a1.5 1.5 0 0 0 1.5-1.5v-5A1.5 1.5 0 0 0 11.5 7V4.5A3.5 3.5 0 0 0 8 1Zm2 6V4.5a2 2 0 1 0-4 0V7h4Z" clip-rule="evenodd" />
              </svg>
              {% trans "Two-Factor Authentication" %}
            </a>
          {% endif %}
          {% url 'socialaccount_connections' as connections_url_ %}
          {% if connections_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ connections_url_ }}">
              <!-- Heroicons: micro link -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M8.914 6.025a.75.75 0 0 1 1.06 0 3.5 3.5 0 0 1 0 4.95l-2 2a3.5 3.5 0 0 1-5.396-4.402.75.75 0 0 1 1.251.827 2 2 0 0 0 3.085 2.514l2-2a2 2 0 0 0 0-2.828.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
                <path fill-rule="evenodd" d="M7.086 9.975a.75.75 0 0 1-1.06 0 3.5 3.5 0 0 1 0-4.95l2-2a3.5 3.5 0 0 1 5.396 4.402.75.75 0 0 1-1.251-.827 2 2 0 0 0-3.085-2.514l-2 2a2 2 0 0 0 0 2.828.75.75 0 0 1 0 1.06Z" clip-rule="evenodd" />
              </svg>
              {% trans "Account Connections" %}
            </a>
          {% endif %}
          {% url 'usersessions_list' as usersessions_list_url_ %}
          {% if usersessions_list_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ usersessions_list_url_ }}">
              <!-- Heroicons: micro computer-desktop -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M2 4.25A2.25 2.25 0 0 1 4.25 2h7.5A2.25 2.25 0 0 1 14 4.25v5.5A2.25 2.25 0 0 1 11.75 12h-1.312c.1.128.21.248.328.36a.75.75 0 0 1 .234.545v.345a.75.75 0 0 1-.75.75h-4.5a.75.75 0 0 1-.75-.75v-.345a.75.75 0 0 1 .234-.545c.118-.111.228-.232.328-.36H4.25A2.25 2.25 0 0 1 2 9.75v-5.5Zm2.25-.75a.75.75 0 0 0-.75.75v4.5c0 .414.336.75.75.75h7.5a.75.75 0 0 0 .75-.75v-4.5a.75.75 0 0 0-.75-.75h-7.5Z" clip-rule="evenodd" />
              </svg>
              {% trans "Sessions" %}
            </a>
          {% endif %}
          {% url 'account_logout' as logout_url_ %}
          {% if logout_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ logout_url_ }}">
              <!-- Heroicons: micro arrow-right-start-on-rectangle -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path fill-rule="evenodd" d="M2 4.75A2.75 2.75 0 0 1 4.75 2h3a2.75 2.75 0 0 1 2.75 2.75v.5a.75.75 0 0 1-1.5 0v-.5c0-.69-.56-1.25-1.25-1.25h-3c-.69 0-1.25.56-1.25 1.25v6.5c0 .69.56 1.25 1.25 1.25h3c.69 0 1.25-.56 1.25-1.25v-.5a.75.75 0 0 1 1.5 0v.5A2.75 2.75 0 0 1 7.75 14h-3A2.75 2.75 0 0 1 2 11.25v-6.5Zm9.47.47a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H5.25a.75.75 0 0 1 0-1.5h7.19l-.97-.97a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
              </svg>
              {% trans "Sign Out" %}
            </a>
          {% endif %}
        {% else %}
          {% url 'account_login' as login_url_ %}
          {% if login_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ login_url_ }}">
              <!-- Heroicons: micro arrow-right-end-on-rectangle -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path d="M11.25 2A2.75 2.75 0 0 1 14 4.75v6.5A2.75 2.75 0 0 1 11.25 14h-3a2.75 2.75 0 0 1-2.75-2.75v-.5a.75.75 0 0 1 1.5 0v.5c0 .69.56 1.25 1.25 1.25h3c.69 0 1.25-.56 1.25-1.25v-6.5c0-.69-.56-1.25-1.25-1.25h-3C7.56 3.5 7 4.06 7 4.75v.5a.75.75 0 0 1-1.5 0v-.5A2.75 2.75 0 0 1 8.25 2h3Z" />
                <path d="M7.97 6.28a.75.75 0 0 1 1.06-1.06l2.25 2.25a.75.75 0 0 1 0 1.06l-2.25 2.25a.75.75 0 1 1-1.06-1.06l.97-.97H1.75a.75.75 0 0 1 0-1.5h7.19l-.97-.97Z" />
              </svg>
              {% trans "Sign In" %}
            </a>
          {% endif %}
          {% url 'account_signup' as signup_url_ %}
          {% if signup_url_ %}
            <a class="btn btn-ghost btn-sm" href="{{ signup_url_ }}">
              <!-- Heroicons: micro user-plus -->
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="size-4">
                <path d="M8.5 4.5a2.5 2.5 0 1 1-5 0 2.5 2.5 0 0 1 5 0ZM10 13c.552 0 1.01-.452.9-.994a5.002 5.002 0 0 0-9.802 0c-.109.542.35.994.902.994h8ZM12.5 3.5a.75.75 0 0 1 .75.75v1h1a.75.75 0 0 1 0 1.5h-1v1a.75.75 0 0 1-1.5 0v-1h-1a.75.75 0 0 1 0-1.5h1v-1a.75.75 0 0 1 .75-.75Z" />
              </svg>
              {% trans "Sign Up" %}
            </a>
          {% endif %}
        {% endif %}
      </div>
      <div class="flex flex-col sm:mx-auto sm:w-full sm:max-w-lg">
        {% if messages %}
          <ul class="flex flex-col gap-2">
            {% for message in messages %}
              <li>
                {% element alert level=message.tags %}
                  {% slot message %}{{ message }}{% endslot %}
                {% endelement %}
              </li>
            {% endfor %}
          </ul>
        {% endif %}
        <div class="my-6 shadow-sm card bg-base-100">
          <div class="card-body">
            {% block content %}{% endblock content %}
          </div>
        </div>
      </div>
    {% endblock body %}
    {% block extra_body %}{% endblock extra_body %}
  </body>
</html>
